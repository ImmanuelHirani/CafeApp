<button id="triggermenuMobile"
    class="fixed right-0 z-50 px-2 py-2 text-base translate-y-1/2 rounded-l-full cursor-pointer md:hidden bottom-36 bg-secondary-color">
    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 16 16" fill="none">
        <path
            d="M9.07757 1.7795C9.61368 2.16737 10.0493 2.73526 10.1891 3.39206C10.194 3.48334 10.1959 3.57482 10.1953 3.66622C10.1951 3.71685 10.1949 3.76748 10.1946 3.81964C10.1941 3.8719 10.1936 3.92416 10.193 3.978C10.1927 4.03124 10.1925 4.08448 10.1922 4.13933C10.1914 4.27031 10.1903 4.40129 10.1891 4.53226C10.2315 4.53027 10.2739 4.52828 10.3176 4.52623C11.8847 4.46226 11.8847 4.46226 12.4061 4.91233C12.4706 4.96598 12.4706 4.96598 12.5363 5.02071C12.8841 5.33967 13.1539 5.72966 13.1769 6.21213C13.1953 7.91217 13.1953 7.91217 12.7862 8.33294C12.5913 8.45412 12.4785 8.45979 12.2478 8.45567C11.9747 8.38253 11.8748 8.30825 11.7093 8.07956C11.5986 7.67345 11.6812 7.30935 11.7455 6.89853C11.7796 6.63198 11.7779 6.4389 11.7093 6.17922C11.5296 6.00787 11.3994 5.96464 11.1541 5.95677C11.0977 5.95453 11.0414 5.95228 10.9834 5.94997C10.9251 5.94854 10.8668 5.94711 10.8067 5.94564C10.7474 5.94347 10.6881 5.94131 10.627 5.93908C10.4811 5.93387 10.3351 5.92948 10.1891 5.92584C10.1911 5.97024 10.1931 6.01463 10.1951 6.06037C10.203 6.26229 10.208 6.46417 10.2128 6.66618C10.216 6.73604 10.2192 6.80589 10.2225 6.87787C10.2316 7.38125 10.2316 7.38125 10.1117 7.56414C9.94663 7.70957 9.77723 7.80704 9.55563 7.80243C9.51643 7.80324 9.47724 7.80406 9.43686 7.8049C9.21115 7.73437 9.05128 7.643 8.92218 7.44611C8.87501 7.1844 8.88645 6.93101 8.89843 6.66618C8.91019 6.29972 8.91019 6.29972 8.92218 5.92584C8.08603 5.92584 7.24989 5.92584 6.3884 5.92584C6.40339 6.41198 6.40339 6.41198 6.42264 6.89796C6.43019 7.38238 6.43019 7.38238 6.31101 7.56414C6.14595 7.70957 5.97655 7.80704 5.75495 7.80243C5.69616 7.80365 5.69616 7.80365 5.63618 7.8049C5.41047 7.73437 5.2506 7.643 5.12151 7.44611C5.0744 7.18477 5.0857 6.93065 5.09775 6.66618C5.10033 6.55956 5.10033 6.55956 5.10295 6.45079C5.10742 6.27568 5.11366 6.10082 5.12151 5.92584C4.91686 5.92729 4.71243 5.9322 4.50786 5.93772C4.45009 5.93809 4.39232 5.93846 4.33279 5.93883C4.04719 5.94818 3.89496 5.96109 3.65568 6.12775C3.51526 6.34015 3.50587 6.42342 3.53394 6.6741C3.54284 6.75429 3.55174 6.83447 3.56091 6.91709C3.61212 7.28118 3.67295 7.64376 3.73631 8.00591C3.81978 8.48739 3.89328 8.96974 3.96324 9.45334C3.97283 9.51926 3.98241 9.58518 3.99229 9.6531C4.03142 9.92251 4.07052 10.1919 4.10862 10.4615C4.13575 10.6533 4.16352 10.845 4.19138 11.0367C4.1993 11.0941 4.20721 11.1514 4.21537 11.2105C4.3022 11.8496 4.3022 11.8496 4.61079 12.3969C4.65391 12.425 4.69702 12.4531 4.74144 12.482C4.78456 12.5114 4.82767 12.5408 4.87209 12.5711C5.07483 12.6855 5.24065 12.7118 5.46888 12.7137C5.52618 12.7144 5.58348 12.715 5.64252 12.7157C5.70428 12.7161 5.76605 12.7166 5.82968 12.7171C5.96041 12.7189 6.09114 12.7207 6.22187 12.7225C6.42802 12.7251 6.63416 12.7275 6.84032 12.7291C7.03925 12.7309 7.23814 12.7338 7.43705 12.7369C7.52931 12.7372 7.52931 12.7372 7.62343 12.7375C7.93981 12.7432 8.15757 12.753 8.41543 12.9571C8.45201 12.9832 8.48859 13.0093 8.52628 13.0363C8.65504 13.2165 8.6614 13.372 8.6688 13.5905C8.58837 13.8519 8.52808 13.9438 8.28656 14.0751C8.00497 14.1874 7.73661 14.1869 7.4368 14.1836C7.38018 14.1837 7.32356 14.1837 7.26522 14.1837C7.14581 14.1836 7.0264 14.183 6.90699 14.1819C6.72656 14.1804 6.54619 14.1806 6.36576 14.181C5.26977 14.1794 4.44244 14.1329 3.61782 13.355C3.01182 12.7437 2.87747 11.9702 2.76168 11.1391C2.74357 11.0157 2.72546 10.8923 2.70734 10.7689C2.68242 10.5978 2.65814 10.4267 2.63385 10.2556C2.57973 9.87566 2.52404 9.4959 2.46871 9.11608C2.45126 8.99553 2.45126 8.99553 2.43346 8.87253C2.35877 8.3601 2.27637 7.85012 2.18103 7.34114C2.06367 6.66429 2.00589 6.10684 2.37394 5.51014C2.68308 5.07495 3.08686 4.70139 3.60124 4.53226C3.86625 4.50318 4.12687 4.50815 4.39305 4.51643C4.49838 4.51814 4.49838 4.51814 4.60584 4.51989C4.77779 4.52286 4.94962 4.52701 5.12151 4.53226C5.1193 4.45657 5.1171 4.38088 5.11483 4.30289C5.09562 3.38951 5.20205 2.83855 5.8183 2.12517C6.67358 1.27927 8.05897 1.13882 9.07757 1.7795ZM6.66949 3.19584C6.36829 3.64165 6.3884 3.98704 6.3884 4.53226C7.22455 4.53226 8.0607 4.53226 8.92218 4.53226C8.92218 3.95048 8.92131 3.52439 8.54211 3.07534C8.27094 2.82709 8.02236 2.73571 7.65529 2.71903C7.22674 2.73956 6.9429 2.86297 6.66949 3.19584Z"
            fill="white" />
        <path
            d="M12.3416 9.66317C12.5196 9.77679 12.6272 9.8544 12.7216 10.0432C12.727 10.1581 12.7284 10.2732 12.7278 10.3882C12.7276 10.4564 12.7274 10.5245 12.7272 10.5948C12.7264 10.702 12.7264 10.702 12.7256 10.8113C12.7253 10.8832 12.725 10.9552 12.7247 11.0293C12.724 11.2074 12.7229 11.3854 12.7216 11.5635C12.7882 11.5615 12.7882 11.5615 12.8562 11.5595C13.0581 11.5542 13.26 11.5509 13.462 11.5477C13.5318 11.5455 13.6017 11.5434 13.6737 11.5412C14.1935 11.535 14.1935 11.535 14.445 11.6833C14.6239 11.8936 14.643 12.044 14.6405 12.3212C14.6117 12.522 14.5109 12.6289 14.3686 12.7671C14.2033 12.8497 14.0818 12.8376 13.897 12.8366C13.8288 12.8364 13.7606 12.8362 13.6904 12.836C13.6189 12.8354 13.5475 12.8349 13.4738 12.8344C13.3659 12.8339 13.3659 12.8339 13.2559 12.8335C13.0778 12.8327 12.8997 12.8317 12.7216 12.8304C12.723 12.8748 12.7243 12.9192 12.7256 12.9649C12.7309 13.1669 12.7342 13.3688 12.7375 13.5707C12.7406 13.6755 12.7406 13.6755 12.7439 13.7824C12.7502 14.3022 12.7502 14.3022 12.6019 14.5538C12.3915 14.7326 12.2412 14.7518 11.964 14.7493C11.7631 14.7204 11.6562 14.6197 11.5181 14.4774C11.4354 14.3121 11.4476 14.1906 11.4486 14.0057C11.4488 13.9376 11.449 13.8694 11.4492 13.7991C11.4497 13.7277 11.4502 13.6562 11.4508 13.5826C11.4511 13.5107 11.4513 13.4387 11.4516 13.3646C11.4524 13.1865 11.4534 13.0085 11.4547 12.8304C11.4103 12.8317 11.3659 12.8331 11.3202 12.8344C11.1183 12.8397 10.9164 12.843 10.7144 12.8462C10.6445 12.8484 10.5747 12.8505 10.5027 12.8527C9.9829 12.859 9.9829 12.859 9.73132 12.7106C9.5525 12.5003 9.53332 12.3499 9.53584 12.0727C9.5647 11.8719 9.66545 11.765 9.80778 11.6269C9.97308 11.5442 10.0945 11.5563 10.2794 11.5573C10.3476 11.5575 10.4158 11.5577 10.486 11.5579C10.5575 11.5585 10.6289 11.559 10.7025 11.5595C10.7745 11.5598 10.8464 11.5601 10.9205 11.5604C11.0986 11.5612 11.2767 11.5622 11.4547 11.5635C11.4534 11.5191 11.4521 11.4747 11.4507 11.429C11.4454 11.2271 11.4421 11.0251 11.4389 10.8232C11.4368 10.7533 11.4347 10.6835 11.4325 10.6115C11.4262 10.0917 11.4262 10.0917 11.5745 9.84009C11.8118 9.63837 12.038 9.61956 12.3416 9.66317Z"
            fill="white" />
    </svg>
</button>
<div id="addtoCartMobile"
    class="fixed inset-0 z-50 invisible flex flex-col justify-end w-full transition-all duration-[400ms] bg-opacity-60 ease-in-out translate-y-full shadow-inner opacity-0 md:hidden h-full shadow-secondary-accent-color bg-secondary-accent-color">
    <form method="POST" action="{{ route('cart.add') }}"
        class="relative flex flex-col w-full gap-3 p-4 rounded-lg h-fit font-aesthetnova bg-secondary-accent-color">
        @csrf
        <!-- Input Hidden Menu ID -->
        <input type="hidden" name="menu_ID" value="{{ $menuDetails->menu_ID ?? '' }}">
        <!-- Input Hidden Customer ID -->
        <input type="hidden" name="customer_ID" value="{{ Auth::user()->customer_ID ?? '' }}">
        <!-- Input Hidden Quantity -->
        <input type="hidden" name="quantity" id="hidden-quantity-mobile" value="1">
        <div class="flex items-center gap-5 menu-selection">
            <img src="{{ asset('storage/' . $menuDetails->image ?? '') }}"
                class="w-[150px] h-[150px] object-cover rounded-lg" alt="{{ $menuDetails->name ?? 'Image' }}" />
            <div class="flex flex-col gap-2 text-wrap">
                @if ($selectedProperty)
                    <div class="flex items-center gap-2 wrap">
                        <p class="text-lg">SIZE: </p>
                        <input name="size" class="text-lg text-white uppercase bg-transparent outline-none w-[4rem]"
                            readonly value="{{ $selectedProperty->size ?? '' }}">
                    </div>
                @else
                    <p>SIZE: Not selected</p>
                @endif
                <p class="text-lg">{{ $menuDetails->name ?? '' }}</p>
                <p class="text-base text-highlight-content">
                    Max. Pembelian 2 pcs
                </p>
            </div>
        </div>
        <!-- Size Selection -->
        <div class="flex flex-col gap-3">
            <p class="text-lg md:text-2xl">Size :</p>
            <div class="flex flex-wrap items-center gap-3 menu-selection-wrapper">
                @isset($menuDetails)
                    @foreach ($menuDetails->properties as $property)
                        <a href="{{ route('frontend.menu.details', ['id' => $menuDetails->menu_ID, 'size' => $property->size]) }}"
                            class="w-[22%] px-3 py-3 uppercase rounded-full outline text-center outline-2 {{ $selectedProperty && $selectedProperty->size == $property->size ? 'bg-secondary-color outline-secondary-color' : 'outline-white hover:bg-secondary-color transition-all ease-in-out duration-300 hover:outline-none' }}">
                            {{ $property->size }}
                        </a>
                    @endforeach
                @else
                    <p>No sizes available for this menu.</p>
                @endisset
            </div>
        </div>
        <!-- Quantity Selection -->
        <div class="flex flex-col gap-3">
            <p class="text-lg md:text-2xl">Qty :</p>
            <div class="flex items-center justify-between gap-1 rounded-lg add-to-cart">
                <button id="decrease-mobile" type="button"
                    class="gap-3 px-3 py-2.5 rounded-lg w-fit bg-secondary-color">
                    <svg height="24px" fill="white" viewBox="0 0 512 512" width="20px">
                        <path
                            d="M417.4,224H94.6C77.7,224,64,238.3,64,256c0,17.7,13.7,32,30.6,32h322.8c16.9,0,30.6-14.3,30.6-32C448,238.3,434.3,224,417.4,224z" />
                    </svg>
                </button>
                <button type="submit"
                    class="w-full gap-3 px-2 py-3 text-sm font-semibold rounded-lg 2xl:px-5 bg-secondary-color">
                    ADD TO CART <span>(<span id="quantity-display-mobile">1</span>)</span>
                </button>
                <button id="increase-mobile" type="button"
                    class="gap-3 px-3 py-2.5 rounded-lg w-fit bg-secondary-color">
                    <svg height="24px" fill="white" viewBox="0 0 512 512" width="20px">
                        <path
                            d="M417.4,224H288V94.6c0-16.9-14.3-30.6-32-30.6c-17.7,0-32,13.7-32,30.6V224H94.6C77.7,224,64,238.3,64,256c0,17.7,13.7,32,30.6,32H224v129.4c0,16.9,14.3,30.6,32,30.6c17.7,0,32-13.7,32-30.6V288h129.4c16.9,0,30.6-14.3,30.6-32C448,238.3,434.3,224,417.4,224z" />
                    </svg>
                </button>
            </div>
        </div>
        <!-- Subtotal -->
        <hr />
        @if ($selectedProperty)
            <div class="flex items-center justify-between gap-2 wrap">
                <p>Subtotal</p>
                <p id="subtotal-mobile">Rp {{ number_format($selectedProperty->price, 0, ',', '.') }}</p>
            </div>
        @else
            <p>SIZE: Not selected</p>
        @endif
        <!-- Close Button -->
        <svg id="closecartMobile" xmlns="http://www.w3.org/2000/svg" class="absolute cursor-pointer top-4 right-4"
            width="20" height="20" viewBox="0 0 12 12" fill="none">
            <path class="fill-white" fill-rule="evenodd" clip-rule="evenodd"
                d="M0.29289 0.29289C0.68342 -0.09763 1.31658 -0.09763 1.70711 0.29289L6 4.58579L10.2929 0.29289C10.6834 -0.09763 11.3166 -0.09763 11.7071 0.29289C12.0976 0.68342 12.0976 1.31658 11.7071 1.70711L7.4142 6L11.7071 10.2929C12.0976 10.6834 12.0976 11.3166 11.7071 11.7071C11.3166 12.0976 10.6834 12.0976 10.2929 11.7071L6 7.4142L1.70711 11.7071C1.31658 12.0976 0.68342 12.0976 0.29289 11.7071C-0.09763 11.3166 -0.09763 10.6834 0.29289 10.2929L4.58579 6L0.29289 1.70711C-0.09763 1.31658 -0.09763 0.68342 0.29289 0.29289Z"
                fill="none" />
        </svg>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const decreaseMobileButton = document.getElementById('decrease-mobile');
        const increaseMobileButton = document.getElementById('increase-mobile');
        const quantityDisplay = document.getElementById('quantity-display-mobile');
        const hiddenQuantityInput = document.getElementById('hidden-quantity-mobile');
        const subtotalMobileElement = document.getElementById('subtotal-mobile');
        const pricePerItem = {{ $selectedProperty->price ?? 0 }}; // Harga per item dari server-side

        let quantity = 1; // Inisialisasi jumlah awal

        function updateValues() {
            quantityDisplay.textContent = quantity;
            hiddenQuantityInput.value = quantity;
            const subtotalMobile = pricePerItem * quantity;
            subtotalMobileElement.textContent = 'Rp ' + subtotalMobile.toLocaleString('id-ID');
        }

        decreaseMobileButton.addEventListener('click', function() {
            if (quantity > 1) {
                quantity--;
                updateValues();
            }
        });

        increaseMobileButton.addEventListener('click', function() {
            if (quantity < 2) { // Sesuai batasan pembelian
                quantity++;
                updateValues();
            }
        });

        updateValues();
    });
</script>
<script>
    const triggermenuMobile = document.getElementById("triggermenuMobile"),
        closecartMobile = document.getElementById("closecartMobile"),
        addtoCartMobile = document.getElementById("addtoCartMobile");

    triggermenuMobile.addEventListener("click", () => {
        addtoCartMobile.classList.add("cart-mobile-menu-active");
    });

    closecartMobile.addEventListener("click", () => {
        addtoCartMobile.classList.remove("cart-mobile-menu-active");
    });
</script>
